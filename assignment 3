#include <stdio.h>
#include <stdlib.h>
// Structure for each relief item
typedef struct {
    char name[30];
    float weight;
    float value;
int divisible; // 1 if item can be divided, 0 otherwise
    float ratio;   // value/weight ratio
} Item;
// Comparator to sort items by value-to-weight ratio (descending)
int compare(const void *a, const void *b) {
    Item *item1 = (Item *)a;
    Item *item2 = (Item *)b;
    if (item2->ratio > item1->ratio)
        return 1;
    else if (item2->ratio < item1->ratio)
        return -1;
    return 0;
}
// Fractional Knapsack algorithm
float fractionalKnapsack(Item items[], int n, float capacity) {
    qsort(items, n, sizeof(Item), compare); // Sort by ratio
 float totalValue = 0.0;
    float remaining = capacity;
    printf("\nItems taken in the boat:\n");
    printf("---------------------------------------------\n");
    printf("%-15s %-10s %-10s %-10s\n", "Item", "Weight", "Value", "Taken(kg)");
    printf("---------------------------------------------\n");

    for (int i = 0; i < n; i++) {
        if (remaining <= 0)
            break;
 if (items[i].weight <= remaining) {
            // Take the whole item
            totalValue += items[i].value;
            remaining -= items[i].weight;
            printf("%-15s %-10.2f %-10.2f %-10.2f\n", items[i].name, items[i].weight, items[i].value, items[i].weight);
        } 
        else if (items[i].divisible == 1) {
            // Take fraction of divisible item
            float fraction = remaining / items[i].weight;
            totalValue += items[i].value * fraction;
            printf("%-15s %-10.2f %-10.2f %-10.2f\n", items[i].name, items[i].weight, items[i].value, remaining);
            remaining = 0;
        }
        // If not divisible and overweight, skip item
    }
   printf("---------------------------------------------\n");
    return totalValue;
}

int main() {
    int n;
    float capacity;
  printf("Enter number of relief items: ");
    scanf("%d", &n);
  Item items[n];
    for (int i = 0; i < n; i++) {
        printf("\nEnter details for item %d:\n", i + 1);
        printf("Name: ");
        scanf("%s", items[i].name);
        printf("Weight (kg): ");
        scanf("%f", &items[i].weight);
        printf("Utility Value: ");
        scanf("%f", &items[i].value);
        printf("Divisible (1=Yes, 0=No): ");
        scanf("%d", &items[i].divisible);
     items[i].ratio = items[i].value / items[i].weight;
    }
   printf("\nEnter boat capacity (in kg): ");
    scanf("%f", &capacity);
  float maxUtility = fractionalKnapsack(items, n, capacity);
    printf("\nMaximum Total Utility Value = %.2f\n", maxUtility);
 return 0;}
